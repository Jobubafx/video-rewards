<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Refiner Tool</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #7E57C2;
            --primary-light: #B39DDB;
            --primary-dark: #5E35B1;
            --secondary: #26A69A;
            --text: #2D3748;
            --text-light: #718096;
            --background: #FAF5FF;
            --surface: #FFFFFF;
            --border: #E2E8F0;
            --shadow: 0 4px 20px rgba(126, 87, 194, 0.15);
            
            --dark-primary: #9575CD;
            --dark-primary-light: #B39DDB;
            --dark-primary-dark: #65499C;
            --dark-secondary: #4DB6AC;
            --dark-text: #E2E8F0;
            --dark-text-light: #A0AEC0;
            --dark-background: #1A202C;
            --dark-surface: #2D3748;
            --dark-border: #4A5568;
            --dark-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--background);
            transition: all 0.4s ease;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        html.dark body {
            color: var(--dark-text);
            background: var(--dark-background);
        }

        header {
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--surface);
            box-shadow: var(--shadow);
            transition: all 0.4s ease;
        }

        html.dark header {
            background: var(--dark-surface);
            box-shadow: var(--dark-shadow);
        }

        header h1 {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: -0.5px;
        }

        html.dark header h1 {
            background: linear-gradient(135deg, var(--dark-primary) 0%, var(--dark-secondary) 100%);
            -webkit-background-clip: text;
            background-clip: text;
        }

        .theme-switch-button {
            background: var(--primary-light);
            border: none;
            cursor: pointer;
            padding: 0.6rem;
            border-radius: 50%;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(126, 87, 194, 0.2);
        }

        .theme-switch-button:hover {
            transform: rotate(15deg);
            background: var(--primary);
        }

        html.dark .theme-switch-button {
            background: var(--dark-primary-light);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        html.dark .theme-switch-button:hover {
            background: var(--dark-primary);
        }

        .theme-switch-button svg {
            width: 24px;
            height: 24px;
            fill: white;
        }

        main {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2.5rem 2rem;
            gap: 2rem;
        }

        .container {
            background: var(--surface);
            border-radius: 16px;
            box-shadow: var(--shadow);
            padding: 2.5rem;
            width: 100%;
            max-width: 800px;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        html.dark .container {
            background: var(--dark-surface);
            box-shadow: var(--dark-shadow);
        }

        html.dark .container::before {
            background: linear-gradient(90deg, var(--dark-primary), var(--dark-secondary));
        }

        h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            text-align: center;
            letter-spacing: -0.5px;
        }

        p.subtext {
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1.1rem;
            color: var(--text-light);
            line-height: 1.7;
            max-width: 90%;
            margin-left: auto;
            margin-right: auto;
        }

        html.dark p.subtext {
            color: var(--dark-text-light);
        }

        label {
            display: block;
            margin-bottom: 0.75rem;
            font-weight: 600;
            font-size: 1rem;
            color: var(--primary);
        }

        html.dark label {
            color: var(--dark-primary);
        }

        textarea {
            width: 100%;
            padding: 1.25rem;
            margin-bottom: 1.5rem;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            background-color: var(--surface);
            color: var(--text);
            resize: vertical;
            min-height: 140px;
            transition: all 0.3s ease;
            line-height: 1.6;
        }

        html.dark textarea {
            background-color: var(--dark-surface);
            color: var(--dark-text);
            border-color: var(--dark-border);
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(126, 87, 194, 0.2);
        }

        html.dark textarea:focus {
            border-color: var(--dark-primary);
            box-shadow: 0 0 0 4px rgba(149, 117, 205, 0.3);
        }

        .button-group {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 1rem;
        }

        .btn {
            padding: 0.875rem 1.75rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(126, 87, 194, 0.3);
        }

        html.dark .btn-primary {
            background: linear-gradient(135deg, var(--dark-primary) 0%, var(--dark-secondary) 100%);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(126, 87, 194, 0.4);
        }

        html.dark .btn-primary:hover {
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.5);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none !important;
        }

        .output-section {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 2px dashed var(--border);
        }

        html.dark .output-section {
            border-top-color: var(--dark-border);
        }

        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .copy-button {
            padding: 0.7rem 1.25rem;
            background: var(--secondary);
            color: white;
            border-radius: 8px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .copy-button:hover {
            background: var(--primary);
            transform: translateY(-1px);
        }

        html.dark .copy-button {
            background: var(--dark-secondary);
        }

        html.dark .copy-button:hover {
            background: var(--dark-primary);
        }

        .copy-button svg {
            width: 18px;
            height: 18px;
            fill: currentColor;
        }

        .loader {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: none;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Animation for the container */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .container {
            animation: fadeIn 0.5s ease-out;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            header {
                padding: 1.25rem 1.5rem;
            }
            
            main {
                padding: 1.5rem 1rem;
            }
            
            .container {
                padding: 1.75rem;
            }
            
            h2 {
                font-size: 1.75rem;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Prompt Refiner Tool</h1>
        <button id="themeSwitch" class="theme-switch-button" aria-label="Toggle theme">
            <svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                <path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 01.104.991 7.5 7.5 0 004.815 11.059.75.75 0 01.332 1.085 8.25 8.25 0 01-8.548 1.705.75.75 0 01-.256-.786 6.75 6.75 0 007.004-1.42.75.75 0 11.961 1.125A8.254 8.254 0 017.5 18 8.25 8.25 0 013 10.5 8.25 8.25 0 019.528 1.718z" clip-rule="evenodd" />
            </svg>
            <svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6" style="display: none;">
                <path fill-rule="evenodd" d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.207 18.894a.75.75 0 101.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V18a.75.75 0 01.75-.75zM6.166 18.894a.75.75 0 00-1.061-1.06l-1.59 1.591a.75.75 0 101.06 1.061l1.591-1.59zM3 12a.75.75 0 01.75-.75h2.25a.75.75 0 010 1.5H3.75A.75.75 0 013 12zM4.575 5.601a.75.75 0 001.06-1.06L4.05 3.09a.75.75 0 10-1.06 1.06l1.59 1.59z" clip-rule="evenodd" />
            </svg>
        </button>
    </header>

    <main>
        <div class="container">
            <h2>Prompt Refiner Tool: Craft Better Prompts Instantly</h2>
            <p class="subtext">Transform your basic ideas into powerful, effective AI prompts with just one click. Our AI will enhance your prompt to be more detailed, specific, and impactful.</p>

            <label for="inputPrompt">Your Original Prompt:</label>
            <textarea id="inputPrompt" placeholder="E.g., 'Draw a cat' or 'Write a story about a future city'"></textarea>

            <div class="button-group">
                <button id="refineButton" class="btn btn-primary">
                    Refine Prompt
                    <div class="loader" id="loader"></div>
                </button>
            </div>

            <div class="output-section">
                <div class="output-header">
                    <label for="outputPrompt">Refined Prompt:</label>
                    <button id="copyButton" class="btn copy-button" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
                            <path d="M7 3.5A1.5 1.5 0 018.5 2h3.879a1.5 1.5 0 011.06.44l2.122 2.12a1.5 1.5 0 01.44 1.061V15.5A1.5 1.5 0 0115.5 17h-5.758a1.5 1.5 0 01-1.06-.44L6.44 14.28a1.5 1.5 0 01-.44-1.06V3.5z" />
                            <path fill-rule="evenodd" d="M7 6a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75V7a.75.75 0 01-.75.75H7.75A.75.75 0 017 7V6zm2 0a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75V7a.75.75 0 01-.75.75H9.75A.75.75 0 019 7V6zm2 0a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75V7a.75.75 0 01-.75.75h-.008A.75.75 0 0111 7V6zm2 0a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75V7a.75.75 0 01-.75.75h-.008A.75.75 0 0113 7V6zm-6 2.5a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.5A.75.75 0 017.75 9H7.75A.75.75 0 017 8.5zm2 0a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.5A.75.75 0 019.75 9H9.75A.75.75 0 019 8.5zm2 0a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.5A.75.75 0 0111.75 9H11.75A.75.75 0 0111 8.5zm2 0a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.5A.75.75 0 0113.75 9H13.75A.75.75 0 0113 8.5zm-6 2.5a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.5a.75.75 0 01-.75.75H7.75a.75.75 0 01-.75-.75v-.5zm2 0a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.5a.75.75 0 01-.75.75H9.75a.75.75 0 01-.75-.75v-.5zm2 0a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.5a.75.75 0 01-.75.75H11.75a.75.75 0 01-.75-.75v-.5zm2 0a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.5a.75.75 0 01-.75.75H13.75a.75.75 0 01-.75-.75v-.5z" clip-rule="evenodd" />
                        </svg>
                        Copy
                    </button>
                </div>
                <textarea id="outputPrompt" readonly placeholder="Your refined prompt will appear here..."></textarea>
            </div>
        </div>
    </main>

    <script>
        const inputPrompt = document.getElementById('inputPrompt');
        const refineButton = document.getElementById('refineButton');
        const outputPrompt = document.getElementById('outputPrompt');
        const copyButton = document.getElementById('copyButton');
        const themeSwitch = document.getElementById('themeSwitch');
        const moonIcon = document.getElementById('moonIcon');
        const sunIcon = document.getElementById('sunIcon');
        const loader = document.getElementById('loader');

        const API_KEY = "AIzaSyBboVl5sj3lrHtz84CMJpJDRTpA9Y9SS-8"; // Placeholder API Key

        // Theme Toggle Functionality
        function setTheme(theme) {
            if (theme === 'dark') {
                document.documentElement.classList.add('dark');
                moonIcon.style.display = 'none';
                sunIcon.style.display = 'block';
            } else {
                document.documentElement.classList.remove('dark');
                moonIcon.style.display = 'block';
                sunIcon.style.display = 'none';
            }
            localStorage.setItem('theme', theme);
        }

        // Initialize theme based on local storage or system preference
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            setTheme(savedTheme);
        } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            setTheme('dark');
        } else {
            setTheme('light');
        }

        themeSwitch.addEventListener('click', () => {
            const currentTheme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
            setTheme(currentTheme === 'light' ? 'dark' : 'light');
        });

        // Typewriter effect function
        function typeWriter(text, i, targetElement, callback) {
            if (i < text.length) {
                targetElement.value += text.charAt(i);
                setTimeout(() => typeWriter(text, i + 1, targetElement, callback), 20); // Adjust typing speed here
            } else if (callback) {
                callback();
            }
        }

        refineButton.addEventListener('click', async () => {
            const prompt = inputPrompt.value.trim();
            if (!prompt) {
                alert('Please enter a prompt to refine.');
                return;
            }

            refineButton.disabled = true;
            copyButton.disabled = true;
            outputPrompt.value = '';
            loader.style.display = 'inline-block'; // Show loader

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `Enhance the following prompt to be more detailed, structured, and effective for a generative AI model. Return only the improved version, nothing else.\n\nPrompt: ${prompt}`
                            }]
                        }]
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    console.error('API Error:', errorData);
                    throw new Error(`API error: ${errorData.error.message || response.statusText}`);
                }

                const data = await response.json();
                const refinedText = data.candidates[0]?.content?.parts[0]?.text || "No refined prompt found. Please try again.";

                typeWriter(refinedText, 0, outputPrompt, () => {
                    copyButton.disabled = false;
                    loader.style.display = 'none'; // Hide loader
                });

            } catch (error) {
                console.error('Error refining prompt:', error);
                outputPrompt.value = `Error: ${error.message}. Please check your API key or try again later.`;
                loader.style.display = 'none'; // Hide loader
            } finally {
                refineButton.disabled = false;
            }
        });

        copyButton.addEventListener('click', () => {
            outputPrompt.select();
            outputPrompt.setSelectionRange(0, 99999); // For mobile devices
            document.execCommand('copy');
            
            const originalText = copyButton.innerHTML;
            copyButton.innerHTML = 'Copied!';
            
            setTimeout(() => {
                copyButton.innerHTML = originalText;
            }, 2000);
        });
    </script>
</body>
</html>